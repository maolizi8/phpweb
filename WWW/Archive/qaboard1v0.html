<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>QA看板</title>
		<link rel="stylesheet" href="theme/css/bootstrap.min.css" type="text/css" />
		<script src="theme/js/jquery-2.0.3.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="theme/js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="theme/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="theme/js/jBootstrapPage.js" type="text/javascript" charset="utf-8"></script>
		<script src="theme/layer/layer.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			th {
				text-align: center;
				border-top: 1px;
			}
			
			tr {
				border-top: 1px;
				border-bottom: 1px;
			}
		</style>
	</head>

	<body>
		<div >
			<h2 style="text-align: center;">QA看板</h2>
			<div id="main">
				<table id="jiratable" class="table" border="1" cellspacing="1" cellpadding="1">
					<thead>
						<tr>
							<th>序号</th>
							<th>项目</th>
							<th>Bug总数</th>
							<th>无效Bug</th>
							<th>线上Bug</th>
							<th>不及时Bug</th>
							
						</tr>
					</thead>
					<tbody id="traintb"></tbody>
				</table>
			</div>
		</div>
		<script type="text/javascript">
			$(function() {
				$.ajax({
					type: "post",
					url: "jira/bugMain.php",
					async: true,
					success: function(data) {
						//var dataList = data;
						var dataList = eval(data);
						console.log(dataList);
						var tbodydisp = "";
						len = dataList.length;
						
						for(i = 0, len; i < len; i++) {
							tbodydisp += "<tr>";
							tbodydisp += "<td align='center'>" + (i + 1) + "</td>";
							tbodydisp += "<td>" + dataList[i].pname + "</td>";
							tbodydisp += "<td align='center'>" + dataList[i].total + "</td>";
							var invalidPercent = Math.round(dataList[i].invalid / dataList[i].total * 10000) / 100.00 + "%";
							var prdPercent=Math.round(dataList[i].sumprd / dataList[i].total * 10000) / 100.00 + "%";
							var prePercent=Math.round(dataList[i].sumpre / dataList[i].total * 10000) / 100.00 + "%";
							tbodydisp += "<td align='center'>" + (dataList[i].invalid||"0")+" / "+invalidPercent + "</td>";
							tbodydisp += "<td align='center'>" + (dataList[i].sumprd||"0")+" / "+prdPercent + "</td>";
							tbodydisp += "<td align='center'>" + (dataList[i].sumpre||"0")+" / "+prePercent + "</td>";
							tbodydisp += "</tr>";
						}
						$("#traintb").append(tbodydisp);
					}
				});
			});
		</script>
	</body>

</html>